# 01-为什么说数据中台是大数据的下一站

从大数据的发展历史  
数据中台与数据仓库、数据湖、大数据平台的区别

## 数据仓库的出现

上个世纪 90 年代BI（Business Intelligence）商业智能出现，BI将企业已有的数据转化为知识，帮助企业做出经营分析决策。

而数据分析需要聚合多个业务系统的数据，比如交易系统、仓储系统的数据等，同时需要保存历史数据，进行大数据量的范围查询。  
传统数据库面向单一业务系统，主要实现的是面向事务的增删改查，已经不能满足数据分析的场景，促使数据仓库概念的出现。

数据仓库之父比尔·恩门（Bill Inmon）在 1991 年出版的《Building the Data Warehouse》中，首次给出了数据仓库的完整定义：

>数据仓库是在企业管理和决策中面向主题的、集成的、与时间相关的，不可修改的数据集合。

电商为例：

有一个数据库专门存放订单的数据，另外一个数据库存放会员相关的数据。  
构建数据仓库，首先要把不同业务系统的数据同步到一个统一的数据仓库中，然后按照**主题域**方式组织数据。

![image-20200405184016495](https://github.com/woleirenlai/Images/blob/master/shujuzhongtai/image-20200405184016495.png)

**主题域**是业务过程的一个高层次的抽象，像商品、交易、用户、流量都能作为一个主题域，可以理解为数据仓库的一个目录。  
数据仓库中的数据一般是按照时间进行分区存放，一般会保留 5 年以上，每个时间分区内的数据都是追加写的方式，对于某条记录是不可更新的。

Bill Inmon与Kimball金博尔共同开创了数仓建模的设计方法，对后来基于数据湖的现在数据仓库的设计有重要意义。  
恩门提出的建模方法自顶向下，顶为数据的来源，在传统数据库中，就是各个业务数据库。  
基于业务中各个实体以及实体之间的关系，构建数据仓库。

例如在一个最简单的买家购买商品的场景中，按照恩门建模模式，首先要理清业务过程中涉及哪些实体。  
买家、商品是一个实体，买家购买商品是一个关系。所以，模型设计应该有买家表，商品表，和买家商品交易表三个模型。

![image-20200405184001885](https://github.com/woleirenlai/Images/blob/master/shujuzhongtai/image-20200405184001885.png)

金博尔的建模方式与恩门相反，采用自底向上的模型设计方法，从数据分析的需求出发，拆分维度和事实，上面的例子中，用户、商品就是维度，库存、用户账户余额是事实。

![image-20200405184215053](https://github.com/woleirenlai/Images/blob/master/shujuzhongtai/image-20200405184215053.png)

两种方法各有优劣  
恩门建模是从数据源开始构建，构建成本比较高，适用于应用场景比较固定的业务，比如金融领域，优势是冗余数据少。  
金博尔建模从分析场景出发，适用于变化速度比较快的业务，比如互联网业务。

传统数据仓库明确了数据分析的应用场景应该用单独的解决方案去实现，不再依赖于业务数据库。但是进入互联网时代后传统数据仓库逐渐没落。

## Hadoop到数据湖

互联网时代的两个重要变化：

* 数据规模前所未有，传统数据仓库难以拓展，无法承载如此规模的海量数据
* 数据类型变得异构化，出了业务数据库的结构化数据，还有来自APP、web的前端埋点数据，或者业务服务器的后端埋点日志，这些数据一般是半结构化，或者是无结构。传统数据仓库对数据模型有严格要求，数据导入到数据仓库前，数据模型就必须先定义好，数据必须按照模型设计存储。

数据规模和数据类型的限制导致传统数据仓库无法支撑互联网时代的BI。

谷歌的分布式存储的三篇论文，提出了一种新的，面向数据分析的海量异构数据的统一计算、存储的方法，奠定了现代大数据的技术基础。

2005年Hadoop出现，相当于是三篇论文的开源实现，相比于传统数仓，有两个优势：

* 完全分布式，易于拓展，可以使用价格低廉的机器堆出一个计算、存储能力很强的集群，满足海量数据的处理要求；
* 弱化数据格式，数据被集成到 Hadoop 之后，可以不保留任何数据格式，数据模型与数据存储分离，数据在被使用的时候，可以按照不同的模型读取，满足异构数据灵活分析的需求。





