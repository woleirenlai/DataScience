# 02-到底什么样的企业应该建数据中台

## 建设数据中台前面临过的挑战

互联网开始面临线上流量枯竭，开始强调数据是企业增长的新动力，数据需求爆发式增长。  
每个业务流程中都有大量的数据产品辅助运营完成日常工作，提高了运营效率，但是也出现很多尖锐的问题：

1.**指标口径不一致**

虽然都叫销售额，但是一个含税一个不含税，不知道指标的业务口径，很难去使用。

2.**数据重复建设，需求响应时间长**

需求的增长，需求的交付时间也被拉长，业务的快速变化，数据敏捷研发需求无法跟上

3.**取数效率低**

面对数十万张表，运营和分析师找数据、准确地理解数据非常困难，想找到一个想要的数据，确认这个数据和自己的需求匹配需要花费三天以上的时间，对新人来说，这个时间会更长。

另外从系统中取数分析对于非技术出身的分析师和运营来说，会导致大部分的取数工作还是依赖数据开发来完成。数据开发大部分的时间都被临时取数的需求占据，无法专注在数仓模型的构建和集市层数据的建设，最终形成了恶性循环，一方面是数据不完善，另一方面是数据开发忙于各种临时取数需求。

4.**数据质量差**

数据经常因为 BUG 导致计算结果错误，最终导致错误的商业决策。

曾经的坑：在大促期间某类商品搜索转化率增长，于是给这个商品分配了更大的流量，但是转化率增长的原因是数据计算错误，这部分流量也就浪费了，如果分配给其他的商品的话，可以多赚 200W 的营收。

5.**数据成本线性增长**

数据成本随着需求的增长而线性增长，大数据资源增多，折合成机器成本要多好多钱。

## 数据中台可以解决这些问题

这些问题背后的原因

**1.对于数据口径不一致**，可能的原因包括：

**业务口径不一致、计算逻辑不一致、数据来源不一致**

业务口径不一致，就要明确区分这两个指标不能使用相同的标识，比如含税和不含税的两个指标， 不能同时都叫销售额。

同时业务口径的描述往往是一段话，但对于很多指标涉及的计算逻辑非常复杂，仅仅一段话是描述不清楚的，此时两个相同业务口径的指标，恰巧又分别是两个数据开发去实现的，这样就有可能造成计算逻辑不一致。比如，有一个指标叫做排关单（排关单：把关单的排除；关单：关闭订单）的当天交易额这个指标，A 认为关单的定义是未发货前关闭的订单，B 认为关单是当天关闭的订单，对业务口径理解不一致，实现的计算结果也就会不一致。

还有两个指标的数据来源不一样，一个来自实时数据，一个是来自离线的数据，即使加工逻辑一样，最终结果也可能不相同。

**所以要实现一致，就务必确保对同一个指标，只有一个业务口径，只加工一次，数据来源必须相同。**

**2.数据需求响应慢**在于烟囱式的开发模式，导致了大量重复逻辑代码的研发

比如同一份原始数据，两个任务都对原始数据进行清洗。如果只有一个任务清洗，产出一张明细表，另外一个任务直接引用这张表，就可以节省一个研发的清洗逻辑的开发。

**所以要解决数据需求响应慢，就必须解决数据复用的问题，确保相同数据只加工一次，实现数据的共享。**

**3.取数效率低**，一方面原因是找不到数据，另一方面原因可能是取不到数据。

要解决找不到数据的问题，就必须要构建一个全局的企业数据资产目录，实现数据地图的功能，快速找到数据。  
而非技术人员并不适合用写 SQL 的方式来取数据，所以要解决取不到数据的问题，就要为他们提供可视化的查询平台，通过勾选一些参数，才更容易使用。

**4.数据质量差**的背后其实是数据问题很难被发现。经常是等到使用数据的人反馈投诉，才知道数据有问题。

而数据的加工链路一般非常长，在我们的业务中，一个指标上游的所有链路加起来有 100 多个节点是很正常的事情。等到运营投诉再知道数据有问题就太迟了，要逐个去排查到底哪个任务有问题，然后再重跑这个任务以及所有下游链路上的每个任务，这样往往需要花费半天到一天的时间，最终导致故障恢复的效率很低，时间很长。

**要解决数据质量差，就要及时发现然后快速恢复数据问题。**

**5.大数据成本问题**，与需求响应慢背后的数据重复建设有关，因为重复开发任务上线肯定会花费双倍的资源。如果可以节省一个任务的资源消耗，满足两个数据需求，就可以控制不必要的资源消耗。所以，成本问题背后也是数据重复建设的问题。

数据中台给解决这些问题带来了新的启发，数据中台可以看做是**企业构建的标准的、安全的、统一的、共享的数据组织，通过数据服务化的方式支撑前端数据应用。**

数据中台可以消除冗余数据、构建企业级数据资产、提高数据的共享能力。

## 数据中台怎么解决这些问题

**1.数据指标问题**

指标是数据加工的结果，要确保数据需求高质量的交付，首先要管好指标，进行全局统一的管理，在数据中台中，必须要有一个团队统一负责指标口径的管控。

要实现指标体系化的管理，提高指标管理的效率。在指标系统中，要明确每个指标的业务口径，数据来源和计算逻辑，同时会按照类似数仓主题域的方式进行管理。

要确保所有的数据产品、报表都引用指标系统的口径定义。当运营把鼠标 Hover 到某个指标上时，就可以浮现出该指标的口径定义。

梳理全局指标，实现数据产品的指标口径统一，还可以消除数据产品中指标口径二义性的问题，同时还提供了方便分析师、运营查询的指标管理系统。

**2.所有数据只加工一次**

对于数仓数据，要求相同粒度的度量或者指标只加工一次，构建全局一致的公共维表。

要实现这个目标，需要两个工具产品：

* 数仓设计中心，在模型设计阶段，强制相同聚合粒度的模型，度量不能重复。
* 数据地图，方便数据开发能够快速地理解一张表的准确含义。

这样可以解决数据重复加工导致研发效率瓶颈的问题。

数据中台**通过服务化的方式来提高数据应用接入和管理的效率。 ** 
原先数仓提供给应用的访问方式是直接提供表，应用开发自己把数据导出到一个查询引擎上，然后去访问查询引擎。  
在数据中台中，数仓的数据是通过 API 接口的方式提供给数据应用，数据应用不用关心底层不同的查询引擎访问方式的差异。

**3.取数效率低**

对于非技术人员，在数据中台中**提供可视化的取数平台**，只需要选取指标、通过获取指标系统中每个指标的可分析维度，然后勾选，添加筛选过滤条件，点击查询，就可以获取数据。  
在数据中台构建企业数据地图，可以很方便地检索有哪些数据，它们在哪些表中，又关联了哪些指标和维度。通过自助取数平台和数据地图，公司的非技术人员开始自助完成取数，相比通过提需求给技术人员的方式，取数效率大大提高。

**4.数据质量**

数据中台由于数据只能加工一次，强调数据的复用性，这就对数据的质量提出了更高的要求。  

通过实现全链路的数据质量稽核监控，对一个指标的产出上游链路中涉及的每个表，实现数据一致性、完整性、正确性和及时性的监控，确保在第一时间发现、恢复、通知数据问题。

之前当技术人员问我们“今天数据有没有问题？” 的时很难回答，现在可以很自信地回答，数据对不对，哪些数据不对，什么时候能恢复了。这个能力对最终达成 99.8% 数据 SLA 至关重要。

**5.成本问题**

在构建数据中台的时候，研发一个数据成本治理系统，从应用维度、表维度、任务的维度、文件的维度进行全面的治理。 

从应用的维度，如果一个报表 30 天内没有访问，这个报表的产出价值就是低的。  
结合这个报表产出的所有上游表以及上游表的产出任务，可以计算加工这张表的成本，有了价值和成本，就能计算 ROI，根据 ROI 就可以实现将低价值的报表下线的功能。  
通过综合治理，最终在一个业务中节省了超过 20% 的成本，约 900W。

## 什么样的企业适合建设数据中台

数据中台的构建需要非常大的投入：

一方面数据中台的建设离不开系统支撑，研发系统需要投入大量的人力，而这些系统是否能够匹配中台建设的需求，还需要持续打磨。另外一方面，面对大量的数据需求，要花费额外的人力去做数据模型的重构，也需要下定决心。

所以数据中台的建设，需要结合企业的现状，根据需要进行选择。企业在选择数据中台的时候，应该考虑这样几个因素。

* 企业是否有大量的数据应用场景： 数据中台本身并不能直接产生业务价值，数据中台的本质是支撑快速地孵化数据应用。所以当企业有较多数据应用的场景时（一般有 3 个以上就可以考虑），例如电商中有各种各样的数据应用场景，此时要考虑构建一个数据中台。
* 经过了快速的信息化建设，企业存在较多的业务数据的孤岛，需要整合各个业务系统的数据，进行关联的分析，此时需要构建一个数据中台。比如在电商的初期，仓储、供应链、市场运营都是独立的数据仓库，当时数据分析往往跨了很多数据系统，为了消除这些数据孤岛，就必须要构建一个数据中台。
* 当团队正在面临效率、质量和成本的苦恼时，面对大量的开发，却不知道如何提高效能，数据经常出问题而束手无策，老板还要求控制数据的成本，这个时候，数据中台可以有所帮助。
* 当企业面临经营困难，需要通过数据实现精益运营，提高企业的运营效率的时候，需要构建一个数据中台，同时结合可视化的 BI 数据产品，实现数据从应用到中台的完整构建，这种类型往往出现在传统企业中。
* 企业规模也是必须要考虑的一个因素，数据中台因为投入大，收益偏长线，所以更适合业务相对稳定的大公司，并不适合初创型的小公司。



总之

* 效率、质量和成本是决定数据能否支撑好业务的关键，构建数据中台的目标就是要实现高效率、高质量、低成本。
* 数据只加工一次是建设数据中台的核心，本质上是要实现公共计算逻辑的下沉和复用。
* 如果企业拥有 3 个以上的数据应用场景，数据产品还在不断研发和更新，必须要认真考虑建设数据中台。